language: python
python:
  - "2.7"
  - "3.4"
#later: - "3.3"
# command to install dependencies
before_install:
  - "./scripts/install_miniconda.sh 2.7 $HOME/miniconda"
  - "./scripts/conda_create_test-env.sh 2.7 $HOME/miniconda"
# GLIBC workaround (https://travis-ci.org/bjodah/chemreac/jobs/34707864):
  - "mv /home/travis/miniconda/envs/test-env/bin/../lib/libm.so* /tmp/"
  - "./scripts/aptget.ubuntu.12.04LTS.sh"
  - "./scripts/install_sundials_w_lapack.sh"
install:
  - "source $HOME/miniconda/bin/activate test-env"
  - "LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH DISTUTILS_DEBUG=1 python setup.py build_ext -i"
# command to run tests
script: "LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH py.test --pep8 --doctest-modules --cov chemreac --ignore build/ --ignore setup.py"
after_success:
  - coveralls
notifications:
  email: false
